<!-- Header -->
<nav class="navbar navbar-expand-lg navbar-dark bg-dark" id="main-nav">
    <div class="container-fluid">
      <a class="nav-link active" aria-current="page" href="/admincontrolpage"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-house-door-fill" viewBox="0 0 16 16">
        <path d="M6.5 14.5v-3.505c0-.245.25-.495.5-.495h2c.25 0 .5.25.5.5v3.5a.5.5 0 0 0 .5.5h4a.5.5 0 0 0 .5-.5v-7a.5.5 0 0 0-.146-.354L13 5.793V2.5a.5.5 0 0 0-.5-.5h-1a.5.5 0 0 0-.5.5v1.293L8.354 1.146a.5.5 0 0 0-.708 0l-6 6A.5.5 0 0 0 1.5 7.5v7a.5.5 0 0 0 .5.5h4a.5.5 0 0 0 .5-.5z"/>
      </svg>Accueil</a>
    <a class="nav-link active" aria-current="page" href="/productStock"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-sliders" viewBox="0 0 16 16">
      <path fill-rule="evenodd" d="M11.5 2a1.5 1.5 0 1 0 0 3 1.5 1.5 0 0 0 0-3zM9.05 3a2.5 2.5 0 0 1 4.9 0H16v1h-2.05a2.5 2.5 0 0 1-4.9 0H0V3h9.05zM4.5 7a1.5 1.5 0 1 0 0 3 1.5 1.5 0 0 0 0-3zM2.05 8a2.5 2.5 0 0 1 4.9 0H16v1H6.95a2.5 2.5 0 0 1-4.9 0H0V8h2.05zm9.45 4a1.5 1.5 0 1 0 0 3 1.5 1.5 0 0 0 0-3zm-2.45 1a2.5 2.5 0 0 1 4.9 0H16v1h-2.05a2.5 2.5 0 0 1-4.9 0H0v-1h9.05z"/>
    </svg>Stock</a>
    <a class="nav-link active" aria-current="page" href="/customerinfo"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-activity" viewBox="0 0 16 16">
      <path fill-rule="evenodd" d="M6 2a.5.5 0 0 1 .47.33L10 12.036l1.53-4.208A.5.5 0 0 1 12 7.5h3.5a.5.5 0 0 1 0 1h-3.15l-1.88 5.17a.5.5 0 0 1-.94 0L6 3.964 4.47 8.171A.5.5 0 0 1 4 8.5H.5a.5.5 0 0 1 0-1h3.15l1.88-5.17A.5.5 0 0 1 6 2Z"/>
    </svg>Commandes</a>
    <a class="nav-link active" aria-current="page" href="/customersList"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-people-fill" viewBox="0 0 16 16">
      <path d="M7 14s-1 0-1-1 1-4 5-4 5 3 5 4-1 1-1 1H7zm4-6a3 3 0 1 0 0-6 3 3 0 0 0 0 6z"/>
      <path fill-rule="evenodd" d="M5.216 14A2.238 2.238 0 0 1 5 13c0-1.355.68-2.75 1.936-3.72A6.325 6.325 0 0 0 5 9c-4 0-5 3-5 4s1 1 1 1h4.216z"/>
      <path d="M4.5 8a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5z"/>
    </svg>Clients</a>
    <a class="nav-link active" aria-current="page" href="/reclamations"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-emoji-angry" viewBox="0 0 16 16">
      <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/>
      <path d="M4.285 12.433a.5.5 0 0 0 .683-.183A3.498 3.498 0 0 1 8 10.5c1.295 0 2.426.703 3.032 1.75a.5.5 0 0 0 .866-.5A4.498 4.498 0 0 0 8 9.5a4.5 4.5 0 0 0-3.898 2.25.5.5 0 0 0 .183.683zm6.991-8.38a.5.5 0 1 1 .448.894l-1.009.504c.176.27.285.64.285 1.049 0 .828-.448 1.5-1 1.5s-1-.672-1-1.5c0-.247.04-.48.11-.686a.502.502 0 0 1 .166-.761l2-1zm-6.552 0a.5.5 0 0 0-.448.894l1.009.504A1.94 1.94 0 0 0 5 6.5C5 7.328 5.448 8 6 8s1-.672 1-1.5c0-.247-.04-.48-.11-.686a.502.502 0 0 0-.166-.761l-2-1z"/>
    </svg>Réclamations</a>
    <a class="nav-link active" aria-current="page" href="/KPI"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-graph-up" viewBox="0 0 16 16">
      <path fill-rule="evenodd" d="M0 0h1v15h15v1H0V0Zm14.817 3.113a.5.5 0 0 1 .07.704l-4.5 5.5a.5.5 0 0 1-.74.037L7.06 6.767l-3.656 5.027a.5.5 0 0 1-.808-.588l4-5.5a.5.5 0 0 1 .758-.06l2.609 2.61 4.15-5.073a.5.5 0 0 1 .704-.07Z"/>
    </svg>KPIs</a>
      
      
      
      <button class="navbar-toggler " type="button" data-bs-toggle="collapse" data-bs-target="#navbarNavDarkDropdown" aria-controls="navbarNavDarkDropdown" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <a class="nav-link active">
      <div class="collapse navbar-collapse" id="navbarNavDarkDropdown" >
        <ul class="navbar-nav ">
          <li class="nav-item dropdown " >
            <a  class="nav-link dropdown-toggle " href="#" id="navbarDarkDropdownMenuLink" role="button" data-toggle="dropdown" aria-expanded="false">
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-person-circle" viewBox="0 0 16 16">
                <path d="M11 6a3 3 0 1 1-6 0 3 3 0 0 1 6 0z"/>
                <path fill-rule="evenodd" d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8zm8-7a7 7 0 0 0-5.468 11.37C3.242 11.226 4.805 10 8 10s4.757 1.225 5.468 2.37A7 7 0 0 0 8 1z"/>
              </svg> {{userName}}
            </a>
            
            <ul class="dropdown-menu dropdown-menu-dark" aria-labelledby="navbarDarkDropdownMenuLink">
              <li><a class="dropdown-item" href="">Profil</a></li>
              <li><a class="dropdown-item" href="/adminLogin">Se déconnecter</a></li>
              
            </ul>
          </li>
        </ul>
      </div></a>
    </div>
  </nav>
    
    <div id="wrapper">
  
       
        <div id="content-wrapper" class="d-flex flex-column">
  
            <!-- Main Content -->
            <div id="content">
  
                <div class="container-fluid">
                  <!-- Page Heading -->
                  <div class="d-sm-flex align-items-center justify-content-between mb-4">
                    <h1 class="h3 mb-0 text-gray-800">KPIs</h1>
                    <h2>{{date}}</h2>
                    <h2>{{ rxTime | date: 'hh:mm:ss a' }}</h2>
                    <select class="form-select" [(ngModel)]="year" aria-label="Default select example" style="width:100px ;">
                      <option selected>{{year}}</option>
                      <option >2022</option>
                      <option >2021</option>
                      <option >2020</option>
                      <option >2019</option>
                    </select>
                    <select class="form-select" [(ngModel)]="mm" aria-label="Default select example" style="width:100px ;">
                      <option selected>{{mm}}</option>
                      <option >01</option>
                      <option >02</option>
                      <option >03</option>
                      <option >04</option>
                      <option >05</option>
                      <option >06</option>
                      <option >07</option>
                      <option >08</option>
                      <option >09</option>
                      <option >10</option>
                      <option >11</option>
                      <option >12</option>
                    </select>
                    
                    <button type="button" class="btn btn-info" (click)="ngOnInit();" style="color:rgb(255, 255, 255);">valider</button>
                    
                </div>
  
                    <div class="row">
  
                        <!-- Area Chart -->
                        <div class="col-xl-8 col-lg-7" >
                            <div class="card shadow mb-4">
                               
                                <!-- Card Body -->
                                <div class="card-body" id="parent">
                                  <table class="bordered" style="display: inline-block;">
                                    <thead>
                                      <tr>
                                      <th><h2>Répartition des commandes {{year}}</h2></th>
                                      <th></th>
                                    </tr>
                                    </thead>
                                  
                                    
                                    
                                    <tbody>
                                      <tr>
                                        <td><h3>Total des commandes</h3></td>
                                        <td><h3 *ngIf="totalCommandes<1600000 && totalCommandes>=1000000" class="yellow">{{totalCommandes}}</h3>
                                          <h3 *ngIf="totalCommandes>=1600000" class="green">{{totalCommandes}}</h3>
                                          <h3 *ngIf="totalCommandes<1000000" class="red">{{totalCommandes}}</h3></td>
                                      </tr>
                                      <tr>
                                        <td><h5>Taux de Commande Grossiste</h5></td>
                                        <td><h5 class="standard">{{tauxCategoryByYear[0].toFixed(2)}}%</h5></td>
                                      </tr>
                                      <tr>
                                        <td><h5>Taux de Commande Pharmacie</h5></td>
                                        <td><h5 class="standard">{{tauxCategoryByYear[1].toFixed(2)}}%</h5></td>
                                      </tr>
                                      <tr>
                                        <td><h5>Taux de commande Clinique</h5></td>
                                        <td><h5 class="standard">{{tauxCategoryByYear[2].toFixed(2)}}%</h5></td>
                                      </tr>
                                      <tr>
                                        <td><h5>Taux de Commande Para/Droguiste</h5></td>
                                        <td><h5 class="standard">{{tauxCategoryByYear[3].toFixed(2)}}%</h5></td>
                                      </tr>
                                      <tr>
                                        <td><h5>Taux de commande Particulier+Autre</h5></td>
                                        <td><h5 class="standard">{{tauxCategoryByYear[4].toFixed(2)}}%</h5></td>
                                      </tr>
                                      <tr>
                                        <td><h5>Taux de commande Intitutions</h5></td>
                                        <td><h5 class="standard">{{tauxCategoryByYear[5].toFixed(2)}}%</h5></td>
                                      </tr>
                                    </tbody>
                                  </table>
                                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                  
                                  
                                  
                                    <table class="bordered" style="display: inline-block;">
                                      <thead>
                                        <tr>
                                        <th><h2>Répartition des réclamations {{year}}</h2></th>
                                        <th></th>
                                      </tr>
                                      </thead>
                                    
                                      
                                      
                                      <tbody>
                                        <tr>
                                          <td><h3>Total des réclamations</h3></td>
                                          <td><h3 *ngIf="indicator.ppm>1000000" class="red">{{totalReclamations}}</h3>
                                            <h3 *ngIf="indicator.ppm<=1000000 && indicator.ppm>800000" class="yellow">{{totalReclamations}}</h3>
                                            <h3 *ngIf="indicator.ppm<800000" class="green">{{totalReclamations}}</h3></td>
                                        </tr>
                                        <tr>
                                          <td><h5>Taux de Clôture des Réclamations</h5></td>
                                          <td><h5 class="standard">{{tauxCloture.toFixed(2)}}%</h5></td>
                                        </tr>
                                        <tr>
                                          <td><h5>Réclamations en-cours</h5></td>
                                          <td><h5 class="standard">{{reclamEncour.toFixed(2)}}%</h5> </td>
                                        </tr>
                                        <tr>
                                          <td><h5>Délai moyen de clôture global</h5></td>
                                          <td><h5 class="standard">{{tempsClotureMoyen.toFixed(2)}}</h5> </td>
                                        </tr>
                                        
                                      </tbody>
                                    </table>
                                    
                                  
                                   
                              </div>
                              <div class="card-body" id="parent">
                                <table class="bordered" style="display: inline-block;">
                                  <thead>
                                    <tr>
                                    <th><h2>Répartition des commandes {{month}}</h2></th>
                                    <th></th>
                                  </tr>
                                  </thead>
                                
                                  
                                  
                                  <tbody>
                                    <tr>
                                      <td><h3>Total des commandes</h3></td>
                                      <td><h3 *ngIf="indicator.efficiency>133332" class="green">{{indicator.efficiency}}</h3>
                                        <h3 *ngIf="indicator.efficiency<=133332 && indicator.efficiency>83333" class="yellow">{{indicator.efficiency}}</h3>
                                        <h3 *ngIf="indicator.efficiency<133332" class="red">{{indicator.efficiency}}</h3></td>
                                    </tr>
                                    <tr>
                                      <td><h5>Taux de Commande Grossiste</h5></td>
                                      <td><h5 class="standard">{{tauxCategory[0].toFixed(2)}}%</h5></td>
                                    </tr>
                                    <tr>
                                      <td><h5>Taux de Commande Pharmacie</h5></td>
                                      <td><h5 class="standard">{{tauxCategory[1].toFixed(2)}}%</h5> </td>
                                    </tr>
                                    <tr>
                                      <td><h5>Taux de Commande Clinique</h5></td>
                                      <td> <h5 class="standard">{{tauxCategory[2].toFixed(2)}}%</h5></td>
                                    </tr>
                                    <tr>
                                      <td><h5>Taux de Commande Para/Droguiste</h5></td>
                                      <td> <h5 class="standard">{{tauxCategory[3].toFixed(2)}}%</h5></td>
                                    </tr>
                                    <tr>
                                      <td><h5>Taux de Commande Particulier+Autre</h5></td>
                                      <td> <h5 class="standard">{{tauxCategory[4].toFixed(2)}}%</h5></td>
                                    </tr>
                                    <tr>
                                      <td><h5>Taux de Commande Institutions</h5></td>
                                      <td><h5 class="standard">{{tauxCategory[5].toFixed(2)}}%</h5> </td>
                                    </tr>
                                  </tbody>
                                </table>
                                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                
                                
                                
                                  <table class="bordered" style="display: inline-block;">
                                    <thead>
                                      <tr>
                                      <th><h2>Répartition des réclamations {{month}}</h2></th>
                                      <th></th>
                                    </tr>
                                    </thead>
                                  
                                    
                                    
                                    <tbody>
                                      <tr>
                                        <td><h3>Total des réclamations</h3></td>
                                        <td><h3 *ngIf="indicator.ppm>83333" class="red">{{indicator.ppm}}</h3>
                                          <h3 *ngIf="indicator.ppm<=83333 && indicator.ppm>=66666" class="yellow">{{indicator.ppm}}</h3>
                                          <h3 *ngIf="indicator.ppm<66666" class="green">{{indicator.ppm}}</h3></td>
                                      </tr>
                                      <tr>
                                        <td><h5></h5></td>
                                        <td><h5></h5></td>
                                      </tr>
                                      <tr>
                                        <td><h5></h5></td>
                                        <td><h5></h5> </td>
                                      </tr>
                                      <tr>
                                        <td><h5></h5></td>
                                        <td><h5></h5> </td>
                                      </tr>
                                      <tr>
                                        <td><h5></h5></td>
                                        <td> <h5></h5></td>
                                      </tr>
                                      <tr>
                                        <td><h5></h5></td>
                                        <td><h5></h5> </td>
                                      </tr>
                                      <tr>
                                        <td><h5></h5></td>
                                        <td><h5></h5> </td>
                                      </tr>
                                    </tbody>
                                  </table>
                                  
                                
                                 
                            </div>
                                
                                
                              
                            
                          
                            </div>
                        </div>
  
                        <!-- Pie Chart -->
                        
                    </div>
  
                    <!-- Content Row -->
                    <div class="row">
  
                        <!-- Content Column -->
                        <div class="col-lg-6 mb-4" >
  
                            <!-- Project Card Example -->
                            <div class="card shadow mb-4">
                                <div class="card-header py-3">
                                    <h6 class="m-0 font-weight-bold text-primary">Evolution des commandes {{year}}
                                    </h6>
                                </div>
                                <div class="card-body" >
                                  <canvas id="myAreaChart"  #mychart>
                                                     {{chart1}}                   
                                  </canvas>
                                  
                                </div>
                            </div>
  
                            <!-- Color System -->
                            
  
                        </div>
                        <div class="col-lg-6 mb-4">
  
                          <!-- Project Card Example -->
                          <div class="card shadow mb-4">
                              <div class="card-header py-3">
                                  <h6 class="m-0 font-weight-bold text-primary">Evolution des réclamations {{year}}
                                  </h6>
                              </div>
                              <div class="card-body">
                                  <canvas id="myAreaChart2" #mychart2>
                                    {{chart2}}
                                  </canvas>
                              </div>
                          </div>
  
                          <!-- Color System -->
                          
  
                      </div>
  
                       
                    </div>
                    <div class="row" >
  
                      <!-- Content Column -->
                      <div class="col-lg-6 mb-4" >

                          <!-- Project Card Example -->
                          <div class="card shadow mb-4">
                              <div class="card-header py-3">
                                  <h6 style="display: inline-block;" class="m-0 font-weight-bold text-primary">Evolution des commandes Grossiste {{year}}</h6>&nbsp;&nbsp;
                                  
                                
                                
                              </div>
                              <div class="card-body" >
                                <canvas id="myAreaChart3"  #mychart3>
                                  {{chart3}}                      
                                </canvas>
                                
                              </div>
                          </div>

                          <!-- Color System -->
                          

                      </div>
                      <div class="col-lg-6 mb-4">

                        <!-- Project Card Example -->
                        <div class="card shadow mb-4">
                            <div class="card-header py-3">
                              <h6 style="display: inline-block;" class="m-0 font-weight-bold text-primary">Evolution des commandes Pharmacie {{year}}</h6>&nbsp;&nbsp;
                                           
                            </div>
                            <div class="card-body">
                              <canvas id="myAreaChart4"  #mychart4>
                                 {{chart4}}                                     
                              </canvas>
                            </div>
                        </div>

                        <!-- Color System -->
                        

                    </div>
                    <div class="col-lg-6 mb-4">

                      <!-- Project Card Example -->
                      <div class="card shadow mb-4">
                          <div class="card-header py-3">
                            <h6 style="display: inline-block;" class="m-0 font-weight-bold text-primary">Evolution des commandes Cliniques {{year}}</h6>&nbsp;&nbsp;
                            
                          </div>
                          <div class="card-body">
                            <canvas id="myAreaChart5"  #mychart5>
                              {{chart5}}                                        
                            </canvas>
                          </div>
                      </div>

                      <!-- Color System -->
                      

                  </div>
                  <div class="col-lg-6 mb-4">

                    <!-- Project Card Example -->
                    <div class="card shadow mb-4">
                        <div class="card-header py-3">
                          <h6 style="display: inline-block;" class="m-0 font-weight-bold text-primary">Evolution des commandes Para/Droguiste {{year}}</h6>&nbsp;&nbsp;
                          
                        </div>
                        <div class="card-body">
                          <canvas id="myAreaChart6"  #mychart6>
                             {{chart6}}                                     
                          </canvas>
                        </div>
                    </div>

                    <!-- Color System -->
                    

                </div>
                <div class="col-lg-6 mb-4">

                  <!-- Project Card Example -->
                  <div class="card shadow mb-4">
                      <div class="card-header py-3">
                        <h6 style="display: inline-block;" class="m-0 font-weight-bold text-primary">Evolution des commandes Particulier+Autres {{year}}</h6>&nbsp;&nbsp;
                        
                      </div>
                      <div class="card-body">
                        <canvas id="myAreaChart7"  #mychart7>
                           {{chart7}}                                     
                        </canvas>
                      </div>
                  </div>

                  <!-- Color System -->
                  

              </div>
              <div class="col-lg-6 mb-4">

                <!-- Project Card Example -->
                <div class="card shadow mb-4">
                    <div class="card-header py-3">
                      <h6 style="display: inline-block;" class="m-0 font-weight-bold text-primary">Evolution des commandes Institutions {{year}}</h6>&nbsp;&nbsp;
                      
                    </div>
                    <div class="card-body">
                      <canvas id="myAreaChart8"  #mychart8>
                        {{chart8}}                                       
                      </canvas>
                    </div>
                </div>

                <!-- Color System -->
                

            </div>
            <div class="col-lg-6 mb-4">

              <!-- Project Card Example -->
              <div class="card shadow mb-4">
                  <div class="card-header py-3">
                    <h6 style="display: inline-block;" class="m-0 font-weight-bold text-primary">Répartition des commandes {{month}}</h6>&nbsp;&nbsp;
      
                  </div>
                  <div class="card-body">
                    <canvas id="myAreaChart9"  #mychart9>
                        {{chart9}}                                    
                    </canvas>
                  </div>
              </div>

              <!-- Color System -->
              

          </div>
          <div class="col-lg-6 mb-4">

            <!-- Project Card Example -->
            <div class="card shadow mb-4">
                <div class="card-header py-3">
                  <h6 style="display: inline-block;" class="m-0 font-weight-bold text-primary">Répartion des réclamations {{month}}</h6>&nbsp;&nbsp;
    
                </div>
                <div class="card-body">
                  <canvas id="myAreaChart10"  #mychart10>
                      {{chart10}}                                    
                  </canvas>
                </div>
            </div>

            <!-- Color System -->
            

        </div>

                     
                  </div>
  
                </div>
                <!-- /.container-fluid -->
  
            </div>
            <!-- End of Main Content -->
  
            <!-- Footer -->
            
            <!-- End of Footer -->
  
        </div>
        <!-- End of Content Wrapper -->
     
    </div>
    <!-- End of Page Wrapper -->
    
  

  
  